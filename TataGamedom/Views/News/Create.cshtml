@model TataGamedom.Models.ViewModels.News.NewsCreateVM

@{
	ViewBag.Title = "Create";
}

<h2>新增新聞</h2>

<div class="container">
	@using (Html.BeginForm("Create", "News", FormMethod.Post, new { enctype = "multipart/form-data" }))
	{
		@Html.AntiForgeryToken()

		<div class="row">
			<hr />
			@Html.ValidationSummary(true, "", new { @class = "text-danger" })
			<div class="mt-3">
				@Html.LabelFor(model => model.Title, htmlAttributes: new { @class = "control-label col-md-2" })
				@Html.EditorFor(model => model.Title, new { htmlAttributes = new { @class = "form-control" } })
				@Html.ValidationMessageFor(model => model.Title, "", new { @class = "text-danger" })
			</div>

			<div class="mt-3">
				@Html.LabelFor(model => model.NewsCategoryId, htmlAttributes: new { @class = "control-label col-md-2" })
				@Html.DropDownList("NewsCategoryId", null, "", htmlAttributes: new { @class = "form-select", @onchange = "showHideGamesDiv();" })
				@Html.ValidationMessageFor(model => model.NewsCategoryId, "", new { @class = "text-danger" })
			</div>

			<div class="mt-3" id="gamesDiv" style="display: none;">
				@Html.LabelFor(model => model.GamesId, htmlAttributes: new { @class = "control-label col-md-2" })
				@Html.DropDownList("GamesId", null, "", new { @class = "form-select" })
				@Html.ValidationMessageFor(model => model.GamesId, "", new { @class = "text-danger" })
			</div>

			<div class="mt-3">
				@Html.LabelFor(model => model.Content, htmlAttributes: new { @class = "control-label col-md-2" })

				@Html.TextAreaFor(model => model.Content, new { htmlAttributes = new { @class = "form-control" } })
				@Html.ValidationMessageFor(model => model.Content, "", new { @class = "text-danger" })
			</div>

			<div class="mt-3">
				@Html.LabelFor(model => model.CoverImg, htmlAttributes: new { @class = "control-label col-md-2" })
				<input type="file" name="file1" class="form-control" />
				@Html.ValidationMessageFor(model => model.CoverImg, "", new { @class = "text-danger" })
			</div>


			<div class="mt-3">
				@Html.LabelFor(model => model.ScheduleDate, htmlAttributes: new { @class = "control-label col-md-2" })
				@Html.EditorFor(model => model.ScheduleDate, new { htmlAttributes = new { @class = "form-control" } })
				@Html.ValidationMessageFor(model => model.ScheduleDate, "", new { @class = "text-danger" })
			</div>


			<div class="mt-3">
				<div class="col-md-offset-2 col-md-10">
					<input type="submit" value="新增" class="btn btn-primary" />
					@Html.ActionLink("取消", "Index", null, new { @class = "btn btn-primary" })
				</div>
			</div>
		</div>
	}
	</div>
	@section Scripts {
		@Scripts.Render("~/bundles/jqueryval")
		<script src="~/Scripts/tinymce/tinymce.min.js"></script>

		<script>
			tinymce.init({
				selector: 'textarea',
				plugins: '',
				toolbar: 'blocks fontfamily fontsize | bold italic underline strikethrough |  align lineheight | checklist numlist bullist indent outdent |',
				tinycomments_mode: 'embedded',
				tinycomments_author: 'Author name',
				mergetags_list: [
					{ value: 'First.Name', title: 'First Name' },
					{ value: 'Email', title: 'Email' },
				]
			});

			function showHideGamesDiv() {
				var newsCategoryId = $('#NewsCategoryId').val();
				if (newsCategoryId == 1) {
					$('#gamesDiv').show();
				} else {
					$('#gamesDiv').hide();
				}
			}
		</script>

	}
