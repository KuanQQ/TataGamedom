@model TataGamedom.Models.ViewModels.Members.BackendMembersEditVM

@{
	ViewBag.Title = "Edit";
}

<h2>修改管理員權限</h2>

<div class="container">
	@using (Html.BeginForm("Edit", "BackendMembersList", new { id = Model.Id }, FormMethod.Post))
	{
		@Html.AntiForgeryToken()

	<div class="row">
		<hr />
		@Html.ValidationSummary(true, "", new { @class = "text-danger" })
		@Html.HiddenFor(model => model.Id)

		<div class="mt-3">
			@Html.LabelFor(model => model.Name, htmlAttributes: new { @class = "control-label col-md-2" })

			@Html.EditorFor(model => model.Name, new { htmlAttributes = new { @class = "form-control ", @readonly = "readonly" } })
			@Html.ValidationMessageFor(model => model.Name, "", new { @class = "text-danger" })

		</div>

		<div class="mt-3">
			@Html.LabelFor(model => model.Account, htmlAttributes: new { @class = "control-label col-md-2" })

			@Html.EditorFor(model => model.Account, new { htmlAttributes = new { @class = "form-control ", @readonly = "readonly" } })
			@Html.ValidationMessageFor(model => model.Account, "", new { @class = "text-danger" })

		</div>

		<div class="mt-3">
			@Html.LabelFor(model => model.BackendMembersRoleId, htmlAttributes: new { @class = "control-label col-md-2" })
			@Html.DropDownList("BackendMembersRoleId", null, "", htmlAttributes: new { @class = "form-select" })
			@Html.ValidationMessageFor(model => model.BackendMembersRoleId, "", new { @class = "text-danger" })

		</div>

		<div class="mt-3">
			<div class="col-md-offset-2 col-md-10">
				@*<input type="submit" value="儲存" class="btn btn-primary" />*@
				<button class="btn btn-primary btn-lg">儲存</button>
				@Html.ActionLink("返回", "Index", null, new { @class = "btn btn-primary" })
			</div>
		</div>

	</div>
	}
<div class="mb-5">
	<div class="mb-3" style="display: flex; justify-content: flex-end;">

		@if (Model.ActiveFlag == true)
		{
			using (Html.BeginForm("Delete", "BackendMembersList", new { id = Model.Id }, FormMethod.Post, new { id = "stopForm" }))
			{
				@Html.AntiForgeryToken()
				<span>&nbsp;</span>
				<button id="btnStop" class="btn btn-danger btn-lg">停權</button>
				//<input type="submit" value="停權" class="btn btn-danger btn-lg" />
			}
		}
		@if (Model.ActiveFlag == false)
		{
			using (Html.BeginForm("Reduction", "BackendMembersList", new { id = Model.Id }, FormMethod.Post, new { id = "restoreForm" }))
			{
				@Html.AntiForgeryToken()
				<span>&nbsp;</span>
				<button id="btnRestore" class="btn btn-success btn-lg">復原</button>
				//<input type="submit" value="復原" class="btn btn-success btn-lg" />
			}
		}
	</div>
</div>
</div>
@section Scripts {
	@Scripts.Render("~/bundles/jqueryval")
	<script>
        document.getElementById("btnStop").addEventListener("click", function (e) {
            e.preventDefault();
            var confirmed = confirm("您是否要停權該管理員？");
            if (confirmed) {
				alert("已將管理員停權！");
                window.location.href = "@Url.Action("BackendMembersList")";
                document.getElementById("stopForm").submit();
            }
		});
	</script>
	<script>
        document.getElementById("btnRestore").addEventListener("click", function (e) {
            e.preventDefault();
			var confirmed = confirm("您是否要復原該管理員權限？");
            if (confirmed) {
                alert("復原成功！");
                window.location.href = "@Url.Action("BackendMembersList")";
                document.getElementById("restoreForm").submit();
            }
        });
	</script>
}
